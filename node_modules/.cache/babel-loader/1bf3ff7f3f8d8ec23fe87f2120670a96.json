{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport selectFilterHeader from \"@/components/selectFilterHeader\";\nimport axios from \"axios\";\nexport default {\n  name: \"HomeView\",\n  components: {\n    selectFilterHeader\n  },\n  created() {\n    this.getApi();\n  },\n  data() {\n    return {\n      wholeSearch: \"\",\n      currentPage: 1,\n      //默認顯示頁面為1\n      pageSize: 5,\n      //每頁顯示的數據\n      keywordSearch: \"\",\n      loading: true,\n      loadingData: 0,\n      color: \"#673ab7\",\n      dateSearch: \"\",\n      typeSelect: [{\n        text: \"專案\",\n        value: \"專案\"\n      }, {\n        text: \"例行性會議\",\n        value: \"例行性會議\"\n      }, {\n        text: \"建築行政\",\n        value: \"建築行政\"\n      }, {\n        text: \"一般行政\",\n        value: \"一般行政\"\n      }],\n      //類型選單\n      dataList: []\n    };\n  },\n  methods: {\n    // 獲取API\n    getApi() {\n      function getAPI() {\n        return axios.get(\"/db.json\");\n      }\n      Promise.all([getAPI()]).then(response => {\n        this.dataList = response[0].data.meetingList;\n        this.loadingData = 100;\n      });\n      setTimeout(() => {\n        if (this.loadingData === 100) {\n          this.loading = false;\n        }\n      }, 1500);\n    },\n    Edit_PricingList(index, result) {\n      let data = JSON.stringify(result);\n      this.$router.push({\n        path: \"editMeeting\",\n        query: {\n          res: data\n        }\n      });\n      /*this.$router.push({\n        path: \"editMeeting\",\n        query: {\n          id: row.id,\n          principal: row.principal,\n          type: row.type,\n          name: row.name,\n          textarea: row.textarea,\n          chairman: row.chairman,\n          record: row.record,\n          date: row.date,\n          time: row.time,\n          theme: row.theme,\n          member: row.member,\n          offer: row.offer,\n          accessory: row.accessory,\n          fileList: row.fileList,\n          detailList: JSON.parse(JSON.stringify(row.detailList)),\n        },\n      });*/\n    },\n\n    // 送簽\n    sendPetition(index, row) {\n      console.log(row);\n      this.$swal.fire({\n        title: \"你確定嗎？\",\n        text: \"即將送出簽核\",\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonColor: \"#0084ff\",\n        confirmButtonColor: \"#cccccc\",\n        confirmButtonText: \"確定送出\",\n        cancelButtonText: \"取消\",\n        closeOnConfirm: false\n      });\n    },\n    // 搜尋高光\n    showDate(val) {\n      val = val + \"\";\n      if (val.indexOf(this.wholeSearch) !== -1 && this.wholeSearch !== \"\") {\n        return val.replace(this.wholeSearch, '<span style=\"color: #000; background: gold\">' + this.wholeSearch + \"</span>\");\n      } else {\n        return val;\n      }\n    },\n    // table下拉篩選\n    filterHandler(value, row, column) {\n      const property = column[\"property\"];\n      return row[property] === value;\n    },\n    //每頁下拉數據\n    handleSizeChange: function (size) {\n      this.pageSize = size;\n    },\n    //點擊第幾頁\n    handleCurrentChange: function (currentPage) {\n      this.currentPage = currentPage;\n    },\n    // 單筆刪除\n    handleDelete(index, row) {\n      this.configForm = row;\n      const id = this.configForm.id;\n      this.$swal.fire({\n        title: \"你確定嗎？\",\n        text: \"資料刪除後將無法復原\",\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonColor: \"#0084ff\",\n        confirmButtonColor: \"#cccccc\",\n        confirmButtonText: \"確定刪除\",\n        cancelButtonText: \"取消\",\n        closeOnConfirm: false\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.axios.delete(\"http://localhost:3000/configForm/\" + `${id}`, row).then(response => {\n            this.configForm.id = response.data.id;\n            this.getApi();\n          }).catch(error => {\n            console.error(\"There was an error!\", error);\n          });\n        }\n      }).catch(() => {});\n    }\n  },\n  computed: {\n    // 搜尋\n    tables() {\n      const search = this.wholeSearch;\n      if (search) {\n        return this.dataList.filter(data => {\n          return Object.keys(data).some(key => {\n            return String(data[key]).toLowerCase().indexOf(search) > -1;\n          });\n        });\n      }\n      return this.dataList;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["selectFilterHeader","axios","name","components","created","getApi","data","wholeSearch","currentPage","pageSize","keywordSearch","loading","loadingData","color","dateSearch","typeSelect","text","value","dataList","methods","getAPI","get","Promise","all","then","response","meetingList","setTimeout","Edit_PricingList","index","result","JSON","stringify","$router","push","path","query","res","sendPetition","row","console","log","$swal","fire","title","icon","showCancelButton","cancelButtonColor","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","showDate","val","indexOf","replace","filterHandler","column","property","handleSizeChange","size","handleCurrentChange","handleDelete","configForm","id","isConfirmed","delete","catch","error","computed","tables","search","filter","Object","keys","some","key","String","toLowerCase"],"sourceRoot":"","sources":["/Users/krystal/Vue/meeting_vue3/src/views/MeetingList.vue"],"sourcesContent":["<template>\n  <div class=\"w-full h-full p-5 meeting_list\">\n    <load-view :loading=\"loading\" :progress-data=\"loadingData\" :color=\"color\"></load-view>\n    <div class=\"flex-col space-y-10 rounded-xl bg-white p-10 shadow-6\">\n      <!--標題-->\n      <div class=\"title-before mb-5 flex border-b border-b-gray-300 pb-5\">\n        <div class=\"flex flex-1 space-x-2\">\n          <el-button type=\"primary\" @click=\"$router.push({ name: 'addMeeting' })\">新增會議記錄</el-button>\n\n          <el-button type=\"success\">匯出資料</el-button>\n        </div>\n        <div class=\"flex space-x-4 inline-block items-center\">\n          <div class=\"flex-1 text-right\">快速搜尋：</div>\n          <el-input v-model=\"wholeSearch\" placeholder=\"請輸入關鍵字\" class=\"flex-1\"></el-input>\n        </div>\n      </div>\n      <!--表格-->\n      <el-table :data=\"tables.slice((currentPage - 1) * pageSize, currentPage * pageSize)\" ref=\"multipleTable\" style=\"width: 100%\">\n        <el-table-column label=\"類型\" prop=\"type\" width=\"100\" :filters=\"typeSelect\" :filter-method=\"filterHandler\" :filter-multiple=\"false\">\n          <template #default=\"scope\">\n            <span v-html=\"showDate(scope.row.type)\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"專案代碼及名稱\" prop=\"name\" min-width=\"250\">\n          <template #default=\"scope\">\n            <span v-html=\"showDate(scope.row.name)\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"會議主題\" prop=\"theme\" width=\"200\">\n          <template #default=\"scope\">\n            <span v-html=\"showDate(scope.row.theme)\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"出席人員\" prop=\"member\" width=\"250\">\n          <template #default=\"scope\">\n            <span v-html=\"showDate(scope.row.member)\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"主席\" prop=\"chairman\" align=\"center\" width=\"100\">\n          <template #default=\"scope\">\n            <span v-html=\"showDate(scope.row.chairman)\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"負責人\" prop=\"principal\" align=\"center\" width=\"100\">\n          <template #default=\"scope\">\n            <span v-html=\"showDate(scope.row.principal)\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"會議日期\" prop=\"date\" align=\"center\" width=\"150\">\n          <template #header>\n            <div class=\"flex items-center\">\n              會議日期\n              <a-trigger trigger=\"click\" :unmount-on-close=\"false\">\n                <a-button><i class=\"ri-search-line\"></i></a-button>\n                <template #content>\n                  <div class=\"demo-basic shadow-xl border border-gray-200 rounded-md bg-white p-2\">\n                    <selectFilterHeader v-model=\"dateSearch\" :shortcuts-dbl=\"[7, 30, 60]\" range-separator=\"至\" is-double-time></selectFilterHeader>\n                  </div>\n                </template>\n              </a-trigger>\n            </div>\n          </template>\n          <template #default=\"scope\">\n            <span v-html=\"showDate(scope.row.date)\"></span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"簽核\" prop=\"approvals\" align=\"center\" width=\"100\">\n          <template #default=\"scope\">\n            <el-tag v-if=\"scope.row.approvals === '已簽核'\" type=\"success\" v-html=\"showDate(scope.row.approvals)\"></el-tag>\n            <el-tag v-else-if=\"scope.row.approvals === '待簽核'\" type=\"danger\" v-html=\"showDate(scope.row.approvals)\"></el-tag>\n            <el-button v-else type=\"primary\" @click=\"sendPetition(scope.row)\">送簽</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" align=\"center\" fixed=\"right\" width=\"100\">\n          <template #default=\"scope\">\n            <!--<el-button type=\"text\" size=\"small\">檢視</el-button>-->\n\n            <el-button type=\"text\" size=\"small\" class=\"ml-0\" @click=\"Edit_PricingList(scope.$index, scope.row)\">修改</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!--分頁-->\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[5, 10, 20, 40]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes,prev, pager, next\"\n        :total=\"dataList.length\"\n        prev-text=\"上一頁\"\n        next-text=\"下一頁\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport selectFilterHeader from \"@/components/selectFilterHeader\";\nimport axios from \"axios\";\nexport default {\n  name: \"HomeView\",\n  components: { selectFilterHeader },\n  created() {\n    this.getApi();\n  },\n  data() {\n    return {\n      wholeSearch: \"\",\n      currentPage: 1, //默認顯示頁面為1\n      pageSize: 5, //每頁顯示的數據\n      keywordSearch: \"\",\n      loading: true,\n      loadingData: 0,\n      color: \"#673ab7\",\n\n      dateSearch: \"\",\n      typeSelect: [\n        {\n          text: \"專案\",\n          value: \"專案\",\n        },\n        {\n          text: \"例行性會議\",\n          value: \"例行性會議\",\n        },\n        {\n          text: \"建築行政\",\n          value: \"建築行政\",\n        },\n        {\n          text: \"一般行政\",\n          value: \"一般行政\",\n        },\n      ], //類型選單\n      dataList: [],\n    };\n  },\n  methods: {\n    // 獲取API\n    getApi() {\n      function getAPI() {\n        return axios.get(\"/db.json\");\n      }\n\n      Promise.all([getAPI()]).then((response) => {\n        this.dataList = response[0].data.meetingList;\n        this.loadingData = 100;\n      });\n\n      setTimeout(() => {\n        if (this.loadingData === 100) {\n          this.loading = false;\n        }\n      }, 1500);\n    },\n\n    Edit_PricingList(index, result) {\n      let data = JSON.stringify(result);\n      this.$router.push({ path: \"editMeeting\", query: { res: data } });\n      /*this.$router.push({\n        path: \"editMeeting\",\n        query: {\n          id: row.id,\n          principal: row.principal,\n          type: row.type,\n          name: row.name,\n          textarea: row.textarea,\n          chairman: row.chairman,\n          record: row.record,\n          date: row.date,\n          time: row.time,\n          theme: row.theme,\n          member: row.member,\n          offer: row.offer,\n          accessory: row.accessory,\n          fileList: row.fileList,\n          detailList: JSON.parse(JSON.stringify(row.detailList)),\n        },\n      });*/\n    },\n\n    // 送簽\n    sendPetition(index, row) {\n      console.log(row);\n      this.$swal.fire({\n        title: \"你確定嗎？\",\n        text: \"即將送出簽核\",\n        icon: \"warning\",\n        showCancelButton: true,\n        cancelButtonColor: \"#0084ff\",\n        confirmButtonColor: \"#cccccc\",\n        confirmButtonText: \"確定送出\",\n        cancelButtonText: \"取消\",\n        closeOnConfirm: false,\n      });\n    },\n\n    // 搜尋高光\n    showDate(val) {\n      val = val + \"\";\n      if (val.indexOf(this.wholeSearch) !== -1 && this.wholeSearch !== \"\") {\n        return val.replace(this.wholeSearch, '<span style=\"color: #000; background: gold\">' + this.wholeSearch + \"</span>\");\n      } else {\n        return val;\n      }\n    },\n\n    // table下拉篩選\n    filterHandler(value, row, column) {\n      const property = column[\"property\"];\n      return row[property] === value;\n    },\n\n    //每頁下拉數據\n    handleSizeChange: function (size) {\n      this.pageSize = size;\n    },\n\n    //點擊第幾頁\n    handleCurrentChange: function (currentPage) {\n      this.currentPage = currentPage;\n    },\n\n    // 單筆刪除\n    handleDelete(index, row) {\n      this.configForm = row;\n      const id = this.configForm.id;\n\n      this.$swal\n        .fire({\n          title: \"你確定嗎？\",\n          text: \"資料刪除後將無法復原\",\n          icon: \"warning\",\n          showCancelButton: true,\n          cancelButtonColor: \"#0084ff\",\n          confirmButtonColor: \"#cccccc\",\n          confirmButtonText: \"確定刪除\",\n          cancelButtonText: \"取消\",\n          closeOnConfirm: false,\n        })\n        .then((result) => {\n          if (result.isConfirmed) {\n            this.axios\n              .delete(\"http://localhost:3000/configForm/\" + `${id}`, row)\n              .then((response) => {\n                this.configForm.id = response.data.id;\n                this.getApi();\n              })\n              .catch((error) => {\n                console.error(\"There was an error!\", error);\n              });\n          }\n        })\n        .catch(() => {});\n    },\n  },\n  computed: {\n    // 搜尋\n    tables() {\n      const search = this.wholeSearch;\n      if (search) {\n        return this.dataList.filter((data) => {\n          return Object.keys(data).some((key) => {\n            return String(data[key]).toLowerCase().indexOf(search) > -1;\n          });\n        });\n      }\n      return this.dataList;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.meeting_list {\n  .el-table {\n    .cell {\n      color: #1d2129;\n      display: flex;\n      align-items: center;\n    }\n    th.el-table__cell {\n      background-color: #f2f3f5 !important;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}