{"version":3,"file":"calendar-cell.js","sources":["../../src/calendar/calendar-cell.tsx"],"sourcesContent":["import { computed, defineComponent } from 'vue';\nimport dayjs from 'dayjs';\n\nimport { useCommonClassName } from '../hooks/useConfig';\nimport { useContent } from '../hooks/tnode';\n\nimport { useCalendarCellClass } from './hook';\n\n// 组件相关的自定义类型\nimport { CalendarCell } from './type';\n\nconst clickTypeEmitEventMap = {\n  click: 'click',\n  dblclick: 'dblclick',\n  contextmenu: 'rightclick',\n};\n\nexport default defineComponent({\n  name: `TCalendarCell`,\n  inheritAttrs: false,\n  props: {\n    item: {\n      type: Object,\n      default: (): CalendarCell => null,\n    },\n    fillWithZero: {\n      type: Boolean,\n      default: undefined,\n    },\n    theme: {\n      type: String,\n      default: (): string => null,\n    },\n    t: Function,\n    global: Object,\n    cell: [String, Function],\n  },\n  emits: [...Object.values(clickTypeEmitEventMap)],\n  setup(props, { emit }) {\n    const renderContent = useContent();\n    const cls = useCalendarCellClass();\n    const { STATUS } = useCommonClassName();\n\n    const valueDisplay = computed<string>(() => {\n      if (props.item.mode === 'month') {\n        const dateNum = props.item.date.getDate();\n        const fillZero = dateNum < 10 && (props.fillWithZero ?? props.global.fillWithZero ?? true);\n        return fillZero ? `0${dateNum}` : dateNum;\n      }\n      const map = props.t(props.global.cellMonth).split(',');\n      return map[props.item.date.getMonth().toString()];\n    });\n    const allowSlot = computed<boolean>(() => {\n      return props.theme === 'full';\n    });\n    const disabled = computed<boolean>(() => {\n      return props.item.mode === 'month' && props.item.belongTo !== 0;\n    });\n    const cellCls = computed(() => {\n      const { mode, date, formattedDate, isCurrent } = props.item;\n      const isNow =\n        mode === 'year' ? new Date().getMonth() === date.getMonth() : formattedDate === dayjs().format('YYYY-MM-DD');\n      return [\n        cls.tableBodyCell.value,\n        {\n          [STATUS.value.disabled]: disabled.value,\n          [STATUS.value.checked]: isCurrent,\n          [cls.tableBodyCell4Now.value]: isNow,\n        },\n      ];\n    });\n    const clickCell = (e: MouseEvent): void => {\n      if (disabled.value) return;\n      const emitName = clickTypeEmitEventMap[e.type];\n      emit(emitName, e);\n    };\n\n    const renderDefaultNode = () => (\n      <>\n        <div class={cls.tableBodyCellDisplay.value}>{valueDisplay.value}</div>\n        <div class={cls.tableBodyCellCsontent.value}>\n          {allowSlot.value &&\n            renderContent('cellAppend', undefined, {\n              params: { ...props.item },\n            })}\n        </div>\n      </>\n    );\n\n    return () => {\n      return (\n        props.item && (\n          <td class={cellCls.value} onClick={clickCell} ondblclick={clickCell} oncontextmenu={clickCell}>\n            {typeof props.cell === 'function'\n              ? props.cell({ ...props.item })\n              : renderContent('cell', undefined, {\n                  defaultNode: renderDefaultNode(),\n                  params: { ...props.item },\n                })}\n          </td>\n        )\n      );\n    };\n  },\n});\n"],"names":["clickTypeEmitEventMap","click","dblclick","contextmenu","defineComponent","name","inheritAttrs","props","item","type","Object","fillWithZero","Boolean","theme","String","t","Function","global","cell","emits","values","setup","emit","renderContent","useContent","cls","useCalendarCellClass","useCommonClassName","STATUS","valueDisplay","computed","mode","dateNum","date","getDate","fillZero","map","cellMonth","split","getMonth","toString","allowSlot","disabled","belongTo","cellCls","formattedDate","isCurrent","isNow","Date","dayjs","format","tableBodyCell","value","_defineProperty","checked","tableBodyCell4Now","clickCell","e","emitName","renderDefaultNode","tableBodyCellDisplay","tableBodyCellCsontent","params","_createVNode","defaultNode"],"mappings":"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"}