{"version":3,"file":"useInputWidth.js","sources":["../../src/input/useInputWidth.ts"],"sourcesContent":["import { onMounted, Ref, ref, watch, nextTick } from 'vue';\nimport { InputValue, TdInputProps } from './type';\n\nexport default function useInputWidth(\n  props: TdInputProps,\n  inputPreRef: Ref<HTMLInputElement>,\n  inputRef: Ref<HTMLInputElement>,\n  innerValue: Ref<InputValue>,\n) {\n  const composing = ref(false);\n  const updateInputWidth = () => {\n    if (!inputPreRef.value) return;\n    const width = inputPreRef.value.offsetWidth;\n    if (width === 0) return;\n    inputRef.value.style.width = `${width}px`;\n  };\n\n  const addListeners = () => {\n    watch(\n      () => innerValue.value + props.placeholder,\n      () => {\n        if (!props.autoWidth) return;\n        nextTick(() => {\n          updateInputWidth();\n        });\n      },\n      { immediate: true },\n    );\n  };\n\n  onMounted(() => {\n    composing.value = false;\n    if (props.autoWidth) {\n      addListeners();\n    }\n  });\n}\n"],"names":["useInputWidth","props","inputPreRef","inputRef","innerValue","composing","ref","updateInputWidth","value","width","offsetWidth","style","addListeners","watch","placeholder","autoWidth","nextTick","immediate","onMounted"],"mappings":";;;;;;;;AAGA,SAAwBA,aACtB,CAAAC,KAAA,EACAC,WACA,EAAAC,QAAA,EACAC,UACA,EAAA;AACM,EAAA,IAAAC,SAAA,GAAYC,IAAI,KAAK,CAAA,CAAA;AAC3B,EAAA,IAAMC,mBAAmB,SAAnBA,mBAAyB;AAC7B,IAAA,IAAI,CAACL,WAAY,CAAAM,KAAA,EAAO,OAAA;AAClB,IAAA,IAAAC,KAAA,GAAQP,YAAYM,KAAM,CAAAE,WAAA,CAAA;IAChC,IAAID,KAAU,KAAA,CAAA,EAAG,OAAA;IACRN,QAAA,CAAAK,KAAA,CAAMG,KAAM,CAAAF,KAAA,GAAA,EAAA,CAAA,MAAA,CAAWA,KAAA,EAAA,IAAA,CAAA,CAAA;GAClC,CAAA;AAEA,EAAA,IAAMG,eAAe,SAAfA,eAAqB;AACzBC,IAAAA,KAAA,CACE,YAAA;AAAA,MAAA,OAAMT,UAAW,CAAAI,KAAA,GAAQP,KAAM,CAAAa,WAAA,CAAA;AAAA,KAAA,EAC/B,YAAM;AACJ,MAAA,IAAI,CAACb,KAAM,CAAAc,SAAA,EAAW,OAAA;AACtBC,MAAAA,QAAA,CAAS,YAAM;AACIT,QAAAA,gBAAA,EAAA,CAAA;AACnB,OAAC,CAAA,CAAA;AACH,KAAA,EACA;AAAEU,MAAAA,WAAW,IAAA;AAAK,KAAA,CACpB,CAAA;GACF,CAAA;AAEAC,EAAAA,SAAA,CAAU,YAAM;IACdb,SAAA,CAAUG,KAAQ,GAAA,KAAA,CAAA;IAClB,IAAIP,MAAMc,SAAW,EAAA;AACNH,MAAAA,YAAA,EAAA,CAAA;AACf,KAAA;AACF,GAAC,CAAA,CAAA;AACH;;;;"}