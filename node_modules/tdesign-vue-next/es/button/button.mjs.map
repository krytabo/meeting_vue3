{"version":3,"file":"button.mjs","sources":["../../src/button/button.tsx"],"sourcesContent":["import { computed, defineComponent, h, ref } from 'vue';\nimport TLoading from '../loading';\nimport props from './props';\nimport useRipple from '../hooks/useRipple';\nimport { useFormDisabled } from '../form/hooks';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\n\nexport default defineComponent({\n  name: 'TButton',\n  props,\n  setup(props, { attrs }) {\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const COMPONENT_NAME = usePrefixClass('button');\n    const { STATUS, SIZE } = useCommonClassName();\n    const disabled = useFormDisabled();\n    const btnRef = ref<HTMLElement>();\n\n    useRipple(btnRef);\n\n    const isDisabled = computed(() => props.disabled || props.loading || disabled.value);\n    const mergeTheme = computed(() => {\n      const { theme, variant } = props;\n      if (theme) return theme;\n      if (variant === 'base') return 'primary';\n      return 'default';\n    });\n    const buttonClass = computed(() => [\n      `${COMPONENT_NAME.value}`,\n      SIZE.value[props.size],\n      `${COMPONENT_NAME.value}--variant-${props.variant}`,\n      `${COMPONENT_NAME.value}--theme-${mergeTheme.value}`,\n      {\n        [STATUS.value.disabled]: props.disabled || disabled.value,\n        [STATUS.value.loading]: props.loading,\n        [`${COMPONENT_NAME.value}--shape-${props.shape}`]: props.shape !== 'rectangle',\n        [`${COMPONENT_NAME.value}--ghost`]: props.ghost,\n        [SIZE.value.block]: props.block,\n      },\n    ]);\n\n    return () => {\n      let buttonContent = renderContent('default', 'content');\n      const icon = props.loading ? <TLoading inheritColor={true} /> : renderTNodeJSX('icon');\n      const iconOnly = icon && !buttonContent;\n\n      buttonContent = buttonContent ? <span class={`${COMPONENT_NAME.value}__text`}>{buttonContent}</span> : '';\n      if (icon) {\n        buttonContent = [icon, buttonContent];\n      }\n\n      const renderTag = () => {\n        if (!props.tag && props.href) return 'a';\n        return props.tag || 'button';\n      };\n\n      const buttonAttrs = {\n        class: [...buttonClass.value, { [`${COMPONENT_NAME.value}--icon-only`]: iconOnly }],\n        type: props.type,\n        disabled: isDisabled.value,\n        href: props.href,\n      };\n\n      return h(\n        renderTag(),\n        {\n          ref: btnRef,\n          ...attrs,\n          ...buttonAttrs,\n          onClick: props.onClick,\n        },\n        [buttonContent],\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","attrs","renderTNodeJSX","useTNodeJSX","renderContent","useContent","COMPONENT_NAME","usePrefixClass","useCommonClassName","STATUS","SIZE","disabled","useFormDisabled","btnRef","ref","useRipple","isDisabled","computed","loading","value","mergeTheme","theme","variant","buttonClass","size","shape","ghost","block","buttonContent","icon","_createVNode","TLoading","iconOnly","renderTag","tag","href","buttonAttrs","type","h","onClick"],"mappings":"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"}